<!-- staff_dashboard.html -->
{% extends "Adminuser/base.html" %}
{% block title %}Transaction{% endblock %}
{% block content %}
<style>
    .main {
         margin-left: auto; 
        padding: 20px;
    }
    .newbook{
        padding-left:180px;
    }
    th, td {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
        width: 50px;
    }
</style>
<div class="glassmorphism">
    
    <!-- Main Content Area -->
    <div class="main">
       <nav class="navbar navbar-light bg-light justify-content-between">
           <a class="navbar-brand">Book Details</a>
           
          <form class="form-inline">
                 <input id="searchInput" class="form-control mr-sm-2" type="search" placeholder="Search Name" aria-label="Search">
                 <button class="btn btn-outline-success my-2 my-sm-0" type="button" onclick="searchBooks()">Search</button>
               </form>
         </nav>
       <table>
           <tr>
               <th>Book ID</th>
               <th>Book Name</th>
               <th>Author</th>
               <th>Description</th>
               <th>Actions</th>
           </tr>
           <!-- Sample data, you can replace this with actual data -->
           {% for book in books %}
           <tr>
               <td>{{book.book_id}}</td>
               <td>{{book.book_name}}</td>
               <td>{{book.book_author}}</td>
               <td>{{book.book_description}}</td>
               <td>
                   <button type="button" class="btn btn-primary" onclick="redirectToIssue('{{ book.id }}')">Issue</button>
                   <button type="button" class="btn btn-danger" onclick="redirectToViewPage('{{ book.id }}')">View</button>
                   <button type="button" class="btn btn-info"  onclick="redirectToRenew('{{ book.id }}')">Renew</button>
               </td>
           </tr>
           {% endfor %}
           <!-- Add this div to hold the number widget -->
       </table>
    </div>
</div>
<!-- Pagination links -->
<div class="pagination">
    {% if books.has_previous %}
        <a href="?page={{ books.previous_page_number }}">Previous</a>
    {% endif %}
    <span>Page {{ books.number }} of {{ books.paginator.num_pages }}</span>
    {% if books.has_next %}
        <a href="?page={{ books.next_page_number }}">Next</a>
    {% endif %}
</div>

<script>
    function redirectToIssue(bookId) {
        // Redirect to the edit page with the Book ID
        window.location.href = '/BookIssue/' + bookId+'/';
    }
  
    function redirectToViewPage(bookId) {
        // Redirect to the view page with the book ID
        window.location.href = '/BookProfile/' + bookId+'/';
    }
    function redirectToRenew(bookId) {
        // Redirect to the view page with the Book ID
        window.location.href = '/BookRenew';
    }

    function searchBooks() {
        var input, filter, table, tr, td, i, txtValue;
        input = document.getElementById("searchInput");
        filter = input.value.toUpperCase();
        table = document.querySelector("table");
        tr = table.getElementsByTagName("tr");
        for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[1]; // Change index to the column where the Book name is located
            if (td) {
                txtValue = td.textContent || td.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    }
</script>

{% endblock %}
